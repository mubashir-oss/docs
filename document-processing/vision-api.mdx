---
title: "Extraction"
description: "Advanced PDF processing and data extraction using Vision API"
---

## Overview

This API provides powerful document processing capabilities using Vision models to extract structured data from PDF documents. It combines computer vision with natural language processing to understand document layouts, identify key information, and extract data according to custom JSON schemas.

## Key Features

<CardGroup cols={2}>
  <Card title="Structured Data Extraction" icon="database">
    Extract specific fields and data points from documents using custom JSON schemas
  </Card>
  <Card title="Bounding Box Detection" icon="square-dashed">
    Identify and locate visual elements with precise coordinate information
  </Card>
  <Card title="Multi-format Support" icon="file-pdf">
    Process 20+ document modalities (PDFs, PPTs, spreadsheets, images, and more) with image-based rendering, OCR, and structure-preserving parsing.
  </Card>
  <Card title="Async Processing" icon="clock">
    Handle large documents with background processing and job management
  </Card>
</CardGroup>

## Getting Started with the /extract Endpoint

Here are the steps to get started:

1. **Get an API Key** - [Sign up on Unsiloed AI](https://cal.com/aman-mishra-p0ry57/15min) to get API access
2. **Define a JSON Schema** - Specify the fields you want to extract. In the Unsiloed AI Platform, you can directly generate a JSON schema through the UI and export that schema as an endpoint to call the `/extract` endpoint

## Defining Extraction Schemas

Unsiloed AI uses **JSON Schema** to define what data should be extracted from a document. You describe the structure you want, and the extraction engine returns structured JSON with citations, bounding boxes, and confidence scores for each field.

<Note>
**Important:** When defining a schema, keep field descriptions as detailed and specific as possible. Clear, pointed descriptions help the model correctly locate and extract the intended information, especially in complex or ambiguous documents.
</Note>

Schemas are strict by default, making outputs deterministic and production-safe.

## Schema Rules (Quick Overview)

All extraction schemas must follow the JSON Schema specification with the following constraints:

- **The root must be an object**: `{ "type": "object" }`
- **Use `properties`** to define fields you want to extract
- **Use `required`** to enforce mandatory fields
- **Set `additionalProperties: false`** to prevent unexpected outputs

This ensures predictable responses and easy downstream validation.

## Example 1: Invoice Extraction

A common schema for extracting data from US invoices.

```json
{
  "type": "object",
  "properties": {
    "document_type": {
      "type": "string",
      "description": "Type of document (invoice, receipt, etc.)"
    },
    "invoice_header": {
      "type": "object",
      "description": "Invoice header details",
      "properties": {
        "invoice_number": {
          "type": "string",
          "description": "Invoice number"
        },
        "invoice_date": {
          "type": "string",
          "description": "Invoice issue date"
        },
        "due_date": {
          "type": "string",
          "description": "Payment due date"
        }
      },
      "required": ["invoice_number", "invoice_date"],
      "additionalProperties": false
    },
    "vendor": {
      "type": "object",
      "description": "Vendor information",
      "properties": {
        "vendor_name": {
          "type": "string",
          "description": "Legal business name"
        },
        "vendor_address": {
          "type": "string",
          "description": "Business address"
        },
        "vendor_email": {
          "type": "string",
          "description": "Accounts receivable contact email"
        }
      },
      "required": ["vendor_name"],
      "additionalProperties": false
    },
    "line_items": {
      "type": "array",
      "description": "List of billed items",
      "items": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "description": "Item or service description"
          },
          "quantity": {
            "type": "number",
            "description": "Quantity billed"
          },
          "unit_price": {
            "type": "number",
            "description": "Price per unit in USD"
          },
          "line_total": {
            "type": "number",
            "description": "Total cost for this line item"
          }
        },
        "required": ["description", "quantity", "unit_price"],
        "additionalProperties": false
      }
    },
    "invoice_totals": {
      "type": "object",
      "description": "Invoice totals",
      "properties": {
        "subtotal": {
          "type": "number",
          "description": "Subtotal before tax"
        },
        "sales_tax": {
          "type": "number",
          "description": "Sales tax amount"
        },
        "total_amount_due": {
          "type": "number",
          "description": "Final amount due in USD"
        }
      },
      "required": ["total_amount_due"],
      "additionalProperties": false
    }
  },
  "required": ["document_type", "invoice_header", "invoice_totals"],
  "additionalProperties": false
}
```

## Example 2: Public Company Filing (10-K / Annual Report)

A schema for extracting governance and ownership information from US SEC filings.

```json
{
  "type": "object",
  "properties": {
    "board_of_directors": {
      "type": "array",
      "description": "Board of Directors",
      "items": {
        "type": "object",
        "properties": {
          "director_name": {
            "type": "string",
            "description": "Full name of board member"
          }
        },
        "required": ["director_name"],
        "additionalProperties": false
      }
    },
    "major_shareholders": {
      "type": "array",
      "description": "Major shareholders and ownership",
      "items": {
        "type": "object",
        "properties": {
          "shareholder_name": {
            "type": "string",
            "description": "Name of shareholder"
          },
          "ownership_percentage": {
            "type": "string",
            "description": "Percentage ownership"
          }
        },
        "required": ["shareholder_name", "ownership_percentage"],
        "additionalProperties": false
      }
    }
  },
  "required": ["board_of_directors", "major_shareholders"],
  "additionalProperties": false
}
```

## How Extraction Works

Once you submit a schema:

1. **Unsiloed locates each field** in the document
2. **Extracts values** that best match the schema
3. **Returns structured JSON** with:
   - Field-level confidence scores
   - Word-level citations
   - Bounding boxes mapped to the original document

This makes every extracted value auditable and traceable.

## Best Practices

- Keep field names simple and descriptive
- Use nested objects to reflect document structure
- Avoid free-form schemasâ€”strict schemas produce better results
- Prefer arrays for repeated sections (line items, directors, transactions)

## Basic Usage

### Simple Data Extraction

<CodeGroup>

```python Python
from unsiloed_sdk import UnsiloedClient

# Define extraction schema using JSON Schema format
schema = {
    "type": "object",
    "properties": {
        "title": {
            "type": "string",
            "description": "Document title"
        },
        "date": {
            "type": "string",
            "description": "Document date"
        }
    },
    "required": ["title", "date"],
    "additionalProperties": False
}

with UnsiloedClient(api_key="your-api-key") as client:
    # Extract and wait for completion
    result = client.extract_and_wait(
        file="document.pdf",
        schema=schema
    )

    # Access extracted data with confidence scores
    print(f"Title: {result.result['title']['value']}")
    print(f"Confidence: {result.result['title']['score']:.2%}")
```

```javascript JavaScript
const { UnsiloedClient } = require('unsiloed-sdk');

const client = new UnsiloedClient({ apiKey: 'your-api-key' });

// Define extraction schema using JSON Schema format
const schema = {
  type: 'object',
  properties: {
    title: {
      type: 'string',
      description: 'Document title'
    },
    date: {
      type: 'string',
      description: 'Document date'
    }
  },
  required: ['title', 'date'],
  additionalProperties: false
};

// Make the extraction request
const result = await client.extract({
  file: 'document.pdf',
  schema: schema
});

console.log(`Job ID: ${result.job_id}`);
```

```typescript TypeScript
import { UnsiloedClient } from 'unsiloed-sdk';

const client = new UnsiloedClient({ apiKey: 'your-api-key' });

// Define extraction schema using JSON Schema format
const schema = {
  type: 'object',
  properties: {
    title: {
      type: 'string',
      description: 'Document title'
    },
    date: {
      type: 'string',
      description: 'Document date'
    }
  },
  required: ['title', 'date'],
  additionalProperties: false
} as const;

// Make the extraction request
const result = await client.extract({
  file: 'document.pdf',
  schema: schema
});

console.log(`Job ID: ${result.job_id}`);
```

```bash cURL
curl -X POST "https://prod.visionapi.unsiloed.ai/extract" \
  -H "accept: application/json" \
  -H "api-key: your-api-key" \
  -H "Content-Type: multipart/form-data" \
  -F "pdf_file=@document.pdf" \
  -F 'schema_data={"type":"object","properties":{"title":{"type":"string","description":"Document title"},"date":{"type":"string","description":"Document date"},"author":{"type":"string","description":"Document author"}},"required":["title","date"],"additionalProperties":false}'

# Response: {"job_id": "945b4578-691f-4c74-8184-dde654093b11", "status": "queued"}

# Get results
curl -X GET "https://prod.visionapi.unsiloed.ai/extract/{job_id}" \
  -H "accept: application/json" \
  -H "api-key: your-api-key"
```

</CodeGroup>

## Advanced Features

### Asynchronous Processing

For large documents or batch processing, use the async endpoints:

<CodeGroup>

```python Python
from unsiloed_sdk import UnsiloedClient

with UnsiloedClient(api_key="your-api-key") as client:
    # Option 1: Start job and poll manually
    response = client.extract(
        file="document.pdf",
        schema=schema
    )
    job_id = response.job_id
    print(f"Job ID: {job_id}")

    # Check job status later
    result = client.get_extract_result(job_id)
    print(f"Status: {result.status}")

    # Option 2: Let SDK handle polling automatically
    result = client.extract_and_wait(
        file="document.pdf",
        schema=schema,
        poll_interval=5,  # Check every 5 seconds
        max_wait_time=300  # Wait up to 5 minutes
    )
    print("Extraction complete!")
```

```javascript JavaScript
const { UnsiloedClient } = require('unsiloed-sdk');

const client = new UnsiloedClient({ apiKey: 'your-api-key' });

// Start async extraction job
const response = await client.extract({
  file: 'document.pdf',
  schema: schema
});

const jobId = response.job_id;

// Check job status and get results
const resultResponse = await client.getExtractResult(jobId);
console.log(resultResponse);

// Or use extractAndWait to automatically poll until completion
const result = await client.extractAndWait({
  file: 'document.pdf',
  schema: schema,
  pollInterval: 5000,  // Check every 5 seconds
  maxWaitTime: 300000  // Wait up to 5 minutes
});
console.log(result);
```

```typescript TypeScript
import { UnsiloedClient } from 'unsiloed-sdk';

const client = new UnsiloedClient({ apiKey: 'your-api-key' });

// Start async extraction job
const response = await client.extract({
  file: 'document.pdf',
  schema: schema
});

const jobId = response.job_id;

// Check job status and get results
const resultResponse = await client.getExtractResult(jobId);
console.log(resultResponse);

// Or use extractAndWait to automatically poll until completion
const result = await client.extractAndWait({
  file: 'document.pdf',
  schema: schema,
  pollInterval: 5000,  // Check every 5 seconds
  maxWaitTime: 300000  // Wait up to 5 minutes
});
console.log(result);
```

```bash cURL
# Start async extraction job
curl -X POST "https://prod.visionapi.unsiloed.ai/extract" \
  -H "api-key: your-api-key" \
  -F "pdf_file=@document.pdf" \
  -F 'schema_data={"type":"object","properties":{"title":{"type":"string"}},"required":["title"],"additionalProperties":false}'

# Poll for results
curl -X GET "https://prod.visionapi.unsiloed.ai/extract/{job_id}" \
  -H "api-key: your-api-key"
```

</CodeGroup>

## Response Format

### Extraction Results Structure

Each extracted field returns an object with detailed metadata:

- `value`: The extracted data matching the schema type
- `score`: Confidence score between 0 and 1
- `bboxes`: Array of bounding box coordinates
- `page_no`: Page number where data was found
- `min_confidence_score`: Overall minimum confidence

### Standard Extraction Response

Example response from extracting a US invoice:

```json
{
  "document_type": {
    "score": 0.9987,
    "value": "invoice",
    "bboxes": [
      {
        "bbox": [125, 45, 280, 75]
      }
    ],
    "page_no": 1
  },
  "invoice_header": {
    "invoice_number": {
      "score": 0.9995,
      "value": "INV-2024-00542",
      "bboxes": [
        {
          "bbox": [450, 120, 580, 145]
        }
      ],
      "page_no": 1
    },
    "invoice_date": {
      "score": 0.9992,
      "value": "January 15, 2024",
      "bboxes": [
        {
          "bbox": [450, 155, 580, 180]
        }
      ],
      "page_no": 1
    }
  },
  "vendor": {
    "vendor_name": {
      "score": 0.9998,
      "value": "Acme Corp",
      "bboxes": [
        {
          "bbox": [85, 95, 250, 125]
        }
      ],
      "page_no": 1
    },
    "vendor_email": {
      "score": 0.9991,
      "value": "billing@acmecorp.com",
      "bboxes": [
        {
          "bbox": [85, 185, 280, 210]
        }
      ],
      "page_no": 1
    }
  },
  "invoice_totals": {
    "total_amount_due": {
      "score": 0.9999,
      "value": 2547.50,
      "bboxes": [
        {
          "bbox": [480, 625, 580, 655]
        }
      ],
      "page_no": 1
    },
    "sales_tax": {
      "score": 0.9996,
      "value": 197.50,
      "bboxes": [
        {
          "bbox": [480, 590, 580, 615]
        }
      ],
      "page_no": 1
    }
  },
  "min_confidence_score": 0.9987
}
```

### Bounding Box Information

Bounding boxes provide precise location data:
- Coordinates are in pixels: `[x1, y1, x2, y2]`
- `x1, y1`: Top-left corner
- `x2, y2`: Bottom-right corner
- Page numbers are 1-indexed

## Error Handling

The API provides detailed error information for JSON schema validation:

```json
{
  "error": "Schema validation failed",
  "details": {
    "field": "shareholding pattern",
    "message": "Invalid JSON Schema format - missing required properties"
  },
  "suggestions": [
    "Ensure all objects have 'type' property",
    "Add 'properties' for object types",
    "Include 'items' for array types",
    "Set 'additionalProperties' to false"
  ]
}
```
