---
title: "Classification"
description: "AI-powered document categorization with confidence scoring"
---

## Overview

The document classification system uses advanced AI models to automatically categorize documents based on their content, structure, and visual elements. It provides accurate classification with confidence scores for single-page and multi-page documents.

<Note>
Classification jobs are processed asynchronously. Submit a classification job and poll the status endpoint to retrieve results when complete.
</Note>

## Key Features

<CardGroup cols={2}>
  <Card title="AI-Powered Analysis" icon="brain">
    Leverage advanced vision models to understand document content and structure
  </Card>
  <Card title="Multi-Page Support" icon="file-lines">
    Analyze entire documents with page-by-page classification and aggregation
  </Card>
  <Card title="Confidence Scoring" icon="percentage">
    Receive detailed confidence scores for classification accuracy
  </Card>
  <Card title="Custom Categories" icon="tags">
    Define custom classification categories with optional descriptions
  </Card>
</CardGroup>

## API Usage

### Classify Document with File Upload

```python
import requests
import json

url = "https://prod.visionapi.unsiloed.ai/classify"
headers = {"api-key": "your-api-key"}

# Define categories with optional descriptions
categories = [
    {"name": "Medical Record", "description": "Patient medical records and history"},
    {"name": "Lab Report", "description": "Laboratory test results"},
    {"name": "Prescription"}  # Description is optional
]

files = {"pdf_file": ("document.pdf", open("document.pdf", "rb"), "application/pdf")}
data = {"categories": json.dumps(categories)}

response = requests.post(url, files=files, data=data, headers=headers)

if response.status_code == 200:
    result = response.json()
    job_id = result['job_id']
    print(f"Classification job created: {job_id}")
    print(f"Status: {result['status']}")
    print(f"Message: {result['message']}")
    print(f"Quota remaining: {result['quota_remaining']}")
else:
    print(f"Error: {response.status_code}")
    print(response.text)

files["pdf_file"][1].close()
```

### Classify Document with File URL

```python
import requests
import json

url = "https://prod.visionapi.unsiloed.ai/classify"
headers = {"api-key": "your-api-key"}

categories = [
    {"name": "Invoice"},
    {"name": "Receipt"},
    {"name": "Contract"}
]

data = {
    "file_url": "https://example.com/document.pdf",
    "categories": json.dumps(categories)
}

response = requests.post(url, data=data, headers=headers)

if response.status_code == 200:
    result = response.json()
    print(f"Classification job created: {result['job_id']}")
else:
    print(f"Error: {response.status_code}")
```

### Check Classification Job Status

```python
import requests

url = "https://prod.visionapi.unsiloed.ai/classify"
job_id = "660e8400-e29b-41d4-a716-446655440001"
headers = {"api-key": "your-api-key"}

response = requests.get(f"{url}/{job_id}", headers=headers)

if response.status_code == 200:
    job = response.json()
    print(f"Status: {job['status']}")
    print(f"Progress: {job['progress']}")

    if job['status'] == 'completed' and 'result' in job:
        result = job['result']
        print(f"\nClassification: {result['classification']}")
        print(f"Confidence: {result['confidence']:.2f}")

        if 'details' in result:
            print(f"Details: {result['details']}")
else:
    print(f"Error: {response.status_code}")
```

### Poll for Completion

```python
import requests
import time

def wait_for_classification(job_id, api_key, max_wait=300):
    """Poll classification job until complete"""

    url = "https://prod.visionapi.unsiloed.ai/classify"
    headers = {"api-key": api_key}
    start_time = time.time()

    while time.time() - start_time < max_wait:
        response = requests.get(f"{url}/{job_id}", headers=headers)

        if response.status_code == 200:
            job = response.json()
            status = job['status']

            print(f"Status: {status} - {job.get('progress', '')}")

            if status == 'completed':
                return job['result']
            elif status == 'failed':
                raise Exception(f"Classification failed: {job.get('error', 'Unknown error')}")

        time.sleep(5)  # Wait 5 seconds before next check

    raise Exception("Classification timed out")

# Usage
try:
    result = wait_for_classification("your-job-id", "your-api-key")
    print(f"Classification: {result['classification']}")
    print(f"Confidence: {result['confidence']}")
except Exception as e:
    print(f"Error: {e}")
```

## Response Format

### Job Creation Response

```json
{
  "job_id": "660e8400-e29b-41d4-a716-446655440001",
  "status": "processing",
  "message": "Classification started",
  "quota_remaining": 400
}
```

### Job Status Response (Completed)

```json
{
  "job_id": "660e8400-e29b-41d4-a716-446655440001",
  "status": "completed",
  "progress": "Classification completed",
  "error": null,
  "result": {
    "success": true,
    "classification": "Medical Record",
    "confidence": 0.95,
    "details": {
      "page_results": [
        {
          "page": 1,
          "classification": "Medical Record",
          "confidence": 0.95
        }
      ]
    }
  }
}
```

### Job Status Response (Processing)

```json
{
  "job_id": "660e8400-e29b-41d4-a716-446655440001",
  "status": "processing",
  "progress": "Analyzing document...",
  "error": null
}
```

### Job Status Response (Failed)

```json
{
  "job_id": "660e8400-e29b-41d4-a716-446655440001",
  "status": "failed",
  "progress": "Classification failed",
  "error": "Invalid PDF format"
}
```

## Common Use Cases

- **Healthcare Documents**: Classify medical records, lab reports, prescriptions, and insurance forms
- **Business Documents**: Categorize invoices, receipts, purchase orders, and contracts
- **Financial Documents**: Sort bank statements, tax forms, and financial reports
- **Legal Documents**: Identify contracts, agreements, legal notices, and compliance forms

## Error Handling

<AccordionGroup>
  <Accordion title="400 - Bad Request">
    Invalid parameters. Check that categories are properly formatted as a JSON array.
  </Accordion>

  <Accordion title="402 - Payment Required">
    Insufficient quota. Check your account quota and upgrade if needed.
  </Accordion>

  <Accordion title="404 - Job Not Found">
    The job ID doesn't exist or has expired. Verify the job ID is correct.
  </Accordion>

  <Accordion title="500 - Internal Server Error">
    Server error during processing. Retry the request or contact support.
  </Accordion>
</AccordionGroup>

## Best Practices

1. **Provide Descriptions**: Add descriptions to categories for better classification accuracy
2. **Monitor Quota**: Track `quota_remaining` in responses to avoid hitting limits
3. **Handle Errors**: Implement proper error handling and retry logic
4. **Poll Appropriately**: Wait 5-10 seconds between status checks to avoid rate limits
5. **Validate Results**: Check confidence scores to determine if manual review is needed
