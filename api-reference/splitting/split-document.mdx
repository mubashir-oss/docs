---
title: "Split Document"
openapi: "/api-reference/openapi.json POST /splitter"
description: "Split PDF documents by classifying pages into different categories"
---

## Overview

The Split Document endpoint analyzes PDF pages, classifies them into predefined categories, and creates separate PDF files for each category. This is ideal for processing mixed document batches like scanned files containing invoices, contracts, and reports.

<Note>
The endpoint processes documents asynchronously via a job-based system. It returns a job_id immediately and processes the document in the background. Poll the status endpoint to retrieve results when complete.
</Note>

## Request

<ParamField body="file" type="file" required>
  The PDF file to split. Either file or file_url must be provided.
</ParamField>

<ParamField body="file_url" type="string">
  URL to a PDF file to split. Either file or file_url must be provided.
</ParamField>

<ParamField body="categories" type="string" required>
  JSON string containing array of category objects with name and optional description (e.g., `[{"name":"invoice","description":"Financial invoices"}]`)
</ParamField>

## Response

<ResponseField name="job_id" type="string">
  Unique identifier for the splitting job
</ResponseField>

<ResponseField name="status" type="string">
  Current status of the job ("processing")
</ResponseField>

<ResponseField name="message" type="string">
  Human-readable status message
</ResponseField>

<ResponseField name="quota_remaining" type="number">
  Remaining API quota after this request
</ResponseField>

## Job Status Response

The endpoint returns a JSON response containing information about the split PDF documents that have been uploaded to cloud storage.

<ResponseField name="success" type="boolean">
  Whether the splitting operation succeeded
</ResponseField>

<ResponseField name="message" type="string">
  Descriptive message about the splitting operation
</ResponseField>

<ResponseField name="files" type="array">
  Array of split PDF files with their metadata
  <Expandable title="file_structure">
    <ResponseField name="name" type="string">
      Original filename of the split PDF (e.g., "invoice.pdf")
    </ResponseField>
    <ResponseField name="fileId" type="string">
      Unique identifier for the file in storage
    </ResponseField>
    <ResponseField name="type" type="string">
      File type (always "file")
    </ResponseField>
    <ResponseField name="path" type="string">
      Relative path to the file in storage
    </ResponseField>
    <ResponseField name="full_path" type="string">
      Complete URL to download the split PDF file
    </ResponseField>
    <ResponseField name="confidence_score" type="number">
      Confidence score for the classification of pages in this file
    </ResponseField>
  </Expandable>
</ResponseField>

## Request Examples

<RequestExample>

```bash cURL
curl -X POST "https://prod.visionapi.unsiloed.ai/splitter" \
  -H "api-key: your-api-key" \
  -F "file=@mixed_documents.pdf" \
  -F 'categories=[{"name":"invoice","description":"Business invoices with itemized charges"},{"name":"contract","description":"Legal agreements and binding documents"}]'
```

```python Python
import requests
import json

url = "https://prod.visionapi.unsiloed.ai/splitter"

# Define categories with descriptions for better accuracy
categories = [
    {"name": "invoice", "description": "Business invoices with itemized charges and payment terms"},
    {"name": "contract", "description": "Legal agreements, terms of service, and binding documents"}, 
    {"name": "report", "description": "Analytical reports, summaries, and data presentations"},
    {"name": "letter", "description": "Correspondence, memos, and communication documents"}
]

files = {"file": ("mixed_documents.pdf", open("mixed_documents.pdf", "rb"), "application/pdf")}
data = {"categories": json.dumps(categories)}
headers = {"api-key": "your-api-key"}

response = requests.post(
    url, 
    files=files, 
    data=data,
    headers=headers
)

if response.status_code == 202:
    result = response.json()
    print(f"Job ID: {result['job_id']}")
    print(f"Status: {result['status']}")
    print(f"Message: {result['message']}")
    print(f"Quota Remaining: {result['quota_remaining']}")
        print(f"  Confidence: {file_info['confidence_score']}")
        print(f"  File ID: {file_info['fileId']}")
else:
    print("Error:", response.status_code, response.text)

# Close file
files["file"][1].close()
```

```javascript JavaScript
const formData = new FormData();
formData.append('file', fileInput.files[0]);

const categories = [
  {name: "invoice", description: "Business invoices with itemized charges"},
  {name: "contract", description: "Legal agreements and binding documents"},
  {name: "report", description: "Analytical reports and data presentations"}
];
formData.append('categories', JSON.stringify(categories));

const response = await fetch('https://prod.visionapi.unsiloed.ai/splitter', {
  method: 'POST',
  headers: {
    'api-key': 'your-api-key'
  },
  body: formData
});

if (response.status === 202) {
  const result = await response.json();
  console.log('Job ID:', result.job_id);
  console.log('Status:', result.status);
  console.log('Message:', result.message);
  console.log('Quota Remaining:', result.quota_remaining);
} else {
  console.error('Split failed:', response.status, await response.text());
}
```

</RequestExample>

## Response Examples

<ResponseExample>

```json Success Response
{
  "success": true,
  "message": "Successfully split PDF into 2 files",
  "files": [
    {
      "name": "invoice.pdf",
      "fileId": "d079d09f-201c-4420-a50a-b25678a71ae9",
      "type": "file",
      "path": "invoice.pdf",
      "full_path": "https://lyltzyvtloozzovxrupp.supabase.co/storage/v1/object/public/files/ef3ec356-b407-4f9f-ac8f-0dfdef9034c0_invoice.pdf?",
      "confidence_score": 0.8
    },
    {
      "name": "contract.pdf",
      "fileId": "320616cc-8dfd-4b8a-8474-8e7a42d9e287",
      "type": "file",
      "path": "contract.pdf",
      "full_path": "https://lyltzyvtloozzovxrupp.supabase.co/storage/v1/object/public/files/dfaa5d30-6955-4a69-9c69-7e3c4efd8450_contract.pdf?",
      "confidence_score": 0.8
    }
  ]
}
```

```json Error Response - Invalid File
{
  "detail": "File must be a PDF"
}
```

```json Error Response - Missing Classes
{
  "detail": "Classes parameter is required"
}
```

```json Error Response - Processing Failed
{
  "detail": "Error from vision-api: Failed to process document"
}
```

</ResponseExample>
